#!/usr/bin/env bash

set -euo pipefail

current_script_path=${BASH_SOURCE[0]}
plugin_dir=$(dirname "$(dirname "$current_script_path")")

# shellcheck source=./lib/utils.bash
. "${plugin_dir}/lib/utils.bash"

query="$1"

if [[ "$query" == "[0-9]" ]]; then
	echo "The AWFY plugin requires a version prefix to identify the language implementation that is to be installed."
	echo "Try for instance 'asdf latest awfy graaljs'."
	exit 1
fi

case $query in
graaljs-jvm)
	list_all_graaljs_versions "jvm" | sort_versions | tail -n1
	exit 0
	;;
graaljs)
	list_all_graaljs_versions "native" | sort_versions | tail -n1
	exit 0
	;;
graalpy-jvm)
	list_all_graalpyjvm_versions | sort_versions | tail -n1
	exit 0
	;;
pharo)
	list_all_pharo_versions | sort_versions | tail -n1
	exit 0
	;;
esac
